{"version":3,"sources":["webpack:///./src/views/consent-forms.vue","webpack:///./src/views/consent-forms.vue?2870","webpack:///./node_modules/vue-demi/lib/index.mjs"],"names":["style","class","left","icon","goBack","disabled","menu","name","label","mailEmailIdForm","loading","items","item","index","key","handleMenuClick","right","subMenu","exportBlankPdf","setup","store","fullMenu","toast","getMenu","value","a","get","data","getForm","formKey","changeMneu","state","artCycle","patient","id","url","params","demographic_no","user_name","user","username","form_name","add","severity","summary","detail","life","patientId","console","log","link_key","window","open","demographicno","menuName","findIndex","parent","__exports__","render"],"mappings":"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","file":"js/chunk-11eda066.a86575db.js","sourcesContent":["<template>\n    <div style=\"width: 600px; margin: auto\">\n        <h1>Consent forms</h1>\n\n        <p-toolbar style=\"margin-bottom: 10px\">\n            <template #left>\n                <p-button\n                    icon=\"pi pi-chevron-left\"\n                    @click=\"goBack\"\n                    :disabled=\"menu != null && menu.name == 'MainMenu'\"\n                />\n                &nbsp;&nbsp;&nbsp;\n                <p-button\n                    label=\"Email ID Cards\"\n                    @click=\"mailEmailIdForm\"\n                    v-if=\"menu != null && menu.name == 'MainMenu'\"\n                />\n            </template>\n            <template #right v-if=\"loading\">\n                <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.5rem\"></i>\n            </template>\n        </p-toolbar>\n\n        <template v-if=\"menu\">\n            <div v-for=\"(item, index) in menu.items\">\n                <div>\n                    <p-toolbar\n                        :key=\"index\"\n                        style=\"margin-bottom: 10px; cursor: pointer;\"\n                        @click=\"handleMenuClick(item)\"\n                    >\n                        <template #left>\n                            <div style=\"font-size: 1.5rem; width: 100%;\">\n                                <span>{{ item.label }}</span>\n                            </div>\n                        </template>\n\n                        <template #right>\n                            <i\n                                class=\"pi pi-arrow-right\"\n                                v-if=\"item.subMenu != null\"\n                            ></i>\n                            &nbsp;&nbsp;&nbsp;\n\n                            <span\n                                v-if=\"item.subMenu == null\"\n                                @click.stop=\"exportBlankPdf(item)\"\n                                style=\"text-decoration:underline; color:blue;\"\n                                >Export</span\n                            >\n                        </template>\n                    </p-toolbar>\n                </div>\n            </div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue-demi\";\nimport axios from \"axios\";\nimport { useStore } from \"vuex\";\nimport { NL_FORM_BASE } from \"@/constants\";\nimport { useToast } from \"primevue/usetoast\";\nexport default {\n    setup() {\n        const store = useStore();\n        const fullMenu = ref([]);\n        const menu = ref(null);\n        const loading = ref(false);\n        const toast = useToast();\n\n        const getMenu = async () => {\n            loading.value = true;\n            try {\n                const { data } = await axios.get(\n                    `${NL_FORM_BASE}/nlforms/get_menu.php`\n                );\n                fullMenu.value = data;\n                menu.value = data[0];\n            } catch (err) {\n            } finally {\n                loading.value = false;\n            }\n        };\n\n        const handleMenuClick = (item) => {\n            if (item.subMenu == null) {\n                getForm(item.formKey);\n            } else {\n                changeMneu(item.subMenu);\n            }\n        };\n\n        const mailEmailIdForm = async () => {\n            if (\n                store.state.artCycle.patient !== null &&\n                store.state.artCycle.patient.id !== null\n            ) {\n                let url = `${NL_FORM_BASE}/nlforms/email_single_form.php`;\n                try {\n                    const { data } = await axios.get(url, {\n                        params: {\n                            demographic_no: store.state.artCycle.patient.id,\n                            user_name: store.state.user.username,\n                            form_name: \"photo-id-card\"\n                        }\n                    });\n                    toast.add({\n                        severity: \"success\",\n                        summary: \"Successful\",\n                        detail: \"Email Sent\",\n                        life: 3000\n                    });\n                } catch (error) {\n                    toast.add({\n                        severity: \"warn\",\n                        summary: \"Successful\",\n                        detail: \"Problem occurred when sending email\",\n                        life: 3000\n                    });\n                }\n            }\n        };\n\n        const getForm = async (formKey) => {\n            let patientId = 0;\n            if (\n                store.state.artCycle.patient !== null &&\n                store.state.artCycle.patient.id !== null\n            ) {\n                patientId = store.state.artCycle.patient.id;\n            }\n\n            console.log(store.state.artCycle.patient);\n\n            let url = `${NL_FORM_BASE}/nlforms/get_form_url.php`;\n            try {\n                const { data } = await axios.get(url, {\n                    params: {\n                        demographic_no: patientId,\n                        user_name: store.state.user.username,\n                        link_key: formKey\n                    }\n                });\n                window.open(data.url, \"_blank\");\n            } catch (error) {}\n        };\n\n        const exportBlankPdf = async (item) => {\n            let patientId = 0;\n            if (\n                store.state.artCycle.patient !== null &&\n                store.state.artCycle.patient.id !== null\n            ) {\n                patientId = store.state.artCycle.patient.id;\n            }\n\n            let url = `${NL_FORM_BASE}/nlforms/export_theform_pdf.php`;\n            try {\n                const { data } = await axios.get(url, {\n                    params: {\n                        demographicno: patientId,\n                        username: store.state.user.username,\n                        link_key: item.formKey\n                    }\n                });\n                window.open(data.url, \"_blank\");\n            } catch (error) {}\n        };\n\n        const changeMneu = (menuName) => {\n            let index = fullMenu.value.findIndex(\n                (item) => item.name == menuName\n            );\n            menu.value = fullMenu.value[index];\n        };\n\n        const goBack = () => {\n            if (menu.value.parent) {\n                let index = fullMenu.value.findIndex(\n                    (item) => item.name == menu.value.parent\n                );\n                menu.value = fullMenu.value[index];\n            }\n        };\n\n        onMounted(() => {\n            getMenu();\n        });\n\n        return {\n            menu,\n            loading,\n            mailEmailIdForm,\n            handleMenuClick,\n            exportBlankPdf,\n            goBack\n        };\n    }\n};\n</script>\n","import { render } from \"./consent-forms.vue?vue&type=template&id=edb2cba0\"\nimport script from \"./consent-forms.vue?vue&type=script&lang=js\"\nexport * from \"./consent-forms.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/zubaer/workspace/vue.js/vue-cycle-ui/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n"],"sourceRoot":""}