{"version":3,"sources":["webpack:///./src/views/consent-forms.vue","webpack:///./src/views/consent-forms.vue?2870","webpack:///./node_modules/vue-demi/lib/index.mjs"],"names":["style","class","left","icon","goBack","disabled","menu","name","loading","items","item","index","key","handleMenuClick","label","right","subMenu","exportBlankPdf","setup","store","fullMenu","getMenu","value","a","get","data","getForm","formKey","changeMneu","patientId","state","artCycle","patient","id","console","log","url","params","demographic_no","user_name","user","username","link_key","window","open","demographicno","menuName","findIndex","parent","__exports__","render"],"mappings":"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","file":"js/chunk-11eda066.1fe4f1bb.js","sourcesContent":["<template>\n    <div style=\"width: 600px; margin: auto\">\n        <h1>Consent forms</h1>\n\n        <p-toolbar style=\"margin-bottom: 10px\">\n            <template #left>\n                <p-button\n                    icon=\"pi pi-chevron-left\"\n                    @click=\"goBack\"\n                    :disabled=\"menu != null && menu.name == 'MainMenu'\"\n                />\n            </template>\n            <template #right v-if=\"loading\">\n                <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.5rem\"></i>\n            </template>\n        </p-toolbar>\n\n        <template v-if=\"menu\">\n            <div v-for=\"(item, index) in menu.items\">\n                <div>\n                    <p-toolbar\n                        :key=\"index\"\n                        style=\"margin-bottom: 10px; cursor: pointer;\"\n                        @click=\"handleMenuClick(item)\"\n                    >\n                        <template #left>\n                            <div style=\"font-size: 1.5rem; width: 100%;\">\n                                <span>{{ item.label }}</span>\n                            </div>\n                        </template>\n\n                        <template #right>\n                            <i\n                                class=\"pi pi-arrow-right\"\n                                v-if=\"item.subMenu != null\"\n                            ></i>\n                            &nbsp;&nbsp;&nbsp;\n\n                            <span\n                                v-if=\"item.subMenu == null\"\n                                @click.stop=\"exportBlankPdf(item)\"\n                                style=\"text-decoration:underline; color:blue;\"\n                                >Export</span\n                            >\n                        </template>\n                    </p-toolbar>\n                </div>\n            </div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue-demi\";\nimport axios from \"axios\";\nimport { useStore } from \"vuex\";\nimport { NL_FORM_BASE } from \"@/constants\";\nexport default {\n    setup() {\n        const store = useStore();\n        const fullMenu = ref([]);\n        const menu = ref(null);\n        const loading = ref(false);\n\n        const getMenu = async () => {\n            loading.value = true;\n            try {\n                const { data } = await axios.get(\n                    `${NL_FORM_BASE}/nlforms/get_menu.php`\n                );\n                fullMenu.value = data;\n                menu.value = data[0];\n            } catch (err) {\n            } finally {\n                loading.value = false;\n            }\n        };\n\n        const handleMenuClick = (item) => {\n            if (item.subMenu == null) {\n                getForm(item.formKey);\n            } else {\n                changeMneu(item.subMenu);\n            }\n        };\n\n        const getForm = async (formKey) => {\n            let patientId = 0;\n            if (\n                store.state.artCycle.patient !== null &&\n                store.state.artCycle.patient.id !== null\n            ) {\n                patientId = store.state.artCycle.patient.id;\n            }\n\n            console.log(store.state.artCycle.patient);\n\n            let url = `${NL_FORM_BASE}/nlforms/get_form_url.php`;\n            try {\n                const { data } = await axios.get(url, {\n                    params: {\n                        demographic_no: patientId,\n                        user_name: store.state.user.username,\n                        link_key: formKey\n                    }\n                });\n                window.open(data.url, \"_blank\");\n            } catch (error) {}\n        };\n\n        const exportBlankPdf = async (item) => {\n            let patientId = 0;\n            if (\n                store.state.artCycle.patient !== null &&\n                store.state.artCycle.patient.id !== null\n            ) {\n                patientId = store.state.artCycle.patient.id;\n            }\n\n            let url = `${NL_FORM_BASE}/nlforms/export_theform_pdf.php`;\n            try {\n                const { data } = await axios.get(url, {\n                    params: {\n                        demographicno: patientId,\n                        username: store.state.user.username,\n                        link_key: item.formKey\n                    }\n                });\n                window.open(data.url, \"_blank\");\n            } catch (error) {}\n        };\n\n        const changeMneu = (menuName) => {\n            let index = fullMenu.value.findIndex(\n                (item) => item.name == menuName\n            );\n            menu.value = fullMenu.value[index];\n        };\n\n        const goBack = () => {\n            if (menu.value.parent) {\n                let index = fullMenu.value.findIndex(\n                    (item) => item.name == menu.value.parent\n                );\n                menu.value = fullMenu.value[index];\n            }\n        };\n\n        onMounted(() => {\n            getMenu();\n        });\n\n        return {\n            menu,\n            loading,\n            handleMenuClick,\n            exportBlankPdf,\n            goBack\n        };\n    }\n};\n</script>\n","import { render } from \"./consent-forms.vue?vue&type=template&id=957fc3a8\"\nimport script from \"./consent-forms.vue?vue&type=script&lang=js\"\nexport * from \"./consent-forms.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/zubaer/workspace/vue.js/vue-cycle-ui/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n"],"sourceRoot":""}