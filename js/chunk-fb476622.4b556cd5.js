(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb476622"],{"1d57":function(t,e,n){t.exports=n.p+"img/women.f05f7bfb.png"},"2ba4":function(t,e,n){},3835:function(t,e,n){"use strict";function a(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function r(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,c,i,o=[],l=!0,s=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=c.call(n)).done)&&(o.push(a.value),o.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{if(!l&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(s)throw r}}return o}}var c=n("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return a(t)||r(t,e)||Object(c["a"])(t,e)||i()}},"85da":function(t,e,n){t.exports=n.p+"img/men.a5e81f19.png"},de9a:function(t,e,n){"use strict";n("2ba4")},e055:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=n("7a23"),r=n("1d57"),c=n.n(r),i=n("85da"),o=n.n(i),l=Object(a["Z"])("data-v-8f8506e8");Object(a["E"])("data-v-8f8506e8");var s={key:0},p={class:"section"},d={class:"p-grid"},b={class:"p-col-12 block-container"},u={class:"block-item"},m={style:{"margin-right":"15px"}},h={key:1,src:c.a,style:{width:"100px",height:"100px"},alt:"Default Female"},f={key:2,src:o.a,style:{width:"100px",height:"100px"},alt:"Default Male"},j={style:{"margin-bottom":"10px"}},g=Object(a["k"])("div",{class:"title"}," PATIENT ",-1),v=Object(a["k"])("br",null,null,-1),O={class:"p-id"},y={class:"p-buttonset"},k={key:0,class:"block-item"},x={style:{"margin-right":"15px"}},w={style:{"margin-bottom":"10px"}},_=Object(a["k"])("div",{class:"title"}," PARTNER ",-1),P=Object(a["k"])("br",null,null,-1),C={class:"p-id"},B={class:"p-buttonset"},T={key:1,src:c.a,style:{width:"100px",height:"100px"},alt:"Default Female"},N={key:2,src:o.a,style:{width:"100px",height:"100px"},alt:"Default Male"},R={class:"section",style:{"margin-top":"20px"}},S={class:"container",style:{background:""}},I={class:"left-box",style:{display:"inline-block",width:"50%","border-right":"dashed 1px grey","min-height":"400px"}},L={class:"inline-box"},E={style:{"margin-bottom":"10px","font-weight":"bold",display:"flex","justify-content":"center","align-content":"center"}},D=Object(a["k"])("br",null,null,-1),F={style:{display:"flex","justify-content":"center","align-content":"center"}},z={class:"p-buttonset",style:{display:"flex"}},J={class:"right-box",style:{display:"inline-block",width:"50%","min-height":"400px"}},G={class:"inline-box"},U={style:{"margin-bottom":"10px","font-weight":"bold",display:"flex","justify-content":"center","align-content":"center"}},V=Object(a["k"])("br",null,null,-1),A={style:{display:"flex","justify-content":"center","align-content":"center"}},M={class:"p-buttonset",style:{display:"flex"}},W={key:1},Z=Object(a["k"])("h2",null,"No patient selected",-1);Object(a["C"])();var H=l((function(t,e,n,r,c,i){var o=Object(a["J"])("p-button");return r.patient.id?(Object(a["B"])(),Object(a["g"])("div",s,[Object(a["k"])("div",null,[Object(a["k"])(o,{label:"Back",class:"p-button-sm p-button-outlined",severity:"info",raised:"",style:{"margin-bottom":"20px"},onClick:r.goToBarcodePage},null,8,["onClick"])]),Object(a["k"])("div",p,[Object(a["k"])("div",d,[Object(a["k"])("div",b,[Object(a["k"])("div",u,[Object(a["k"])("div",m,[r.patientPhoto?(Object(a["B"])(),Object(a["g"])("img",{key:0,src:r.patientPhoto,alt:"Patient Photo",style:{height:"100px"}},null,8,["src"])):"F"===r.patient.sex?(Object(a["B"])(),Object(a["g"])("img",h)):(Object(a["B"])(),Object(a["g"])("img",f))]),Object(a["k"])("div",null,[Object(a["k"])("div",j,[g,Object(a["k"])("span",null,Object(a["N"])(r.patient.firstName)+" "+Object(a["N"])(r.patient.lastName),1),v,Object(a["k"])("span",O,Object(a["N"])(r.patient.id),1)]),Object(a["k"])("span",y,[Object(a["k"])(o,{label:"Barcode",class:"p-button-sm",onClick:e[1]||(e[1]=function(t){return r.showBarcodeV2(r.patient)})}),Object(a["k"])(o,{class:"p-button-sm",icon:"pi pi-print",onClick:e[2]||(e[2]=function(t){return r.printToZebraPrinter(r.patient)})})])])]),r.partner.id?(Object(a["B"])(),Object(a["g"])("div",k,[Object(a["k"])("div",x,[Object(a["k"])("div",w,[_,Object(a["k"])("span",null,Object(a["N"])(r.partner.firstName)+" "+Object(a["N"])(r.partner.lastName),1),P,Object(a["k"])("span",C,Object(a["N"])(r.partner.id),1)]),Object(a["k"])("span",B,[Object(a["k"])(o,{label:"Barcode",class:"p-button-sm",onClick:e[3]||(e[3]=function(t){return r.showBarcodeV2(r.partner)})}),Object(a["k"])(o,{class:"p-button-sm",icon:"pi pi-print",onClick:e[4]||(e[4]=function(t){return r.printToZebraPrinter(r.partner)})})])]),Object(a["k"])("div",null,[r.partnerPhoto?(Object(a["B"])(),Object(a["g"])("img",{key:0,src:r.partnerPhoto,alt:"Partner Photo",style:{height:"100px"}},null,8,["src"])):"F"===r.partner.sex?(Object(a["B"])(),Object(a["g"])("img",T)):(Object(a["B"])(),Object(a["g"])("img",N))])])):Object(a["h"])("",!0)])])]),Object(a["k"])("div",R,[Object(a["k"])("div",S,[Object(a["k"])("div",I,[(Object(a["B"])(!0),Object(a["g"])(a["a"],null,Object(a["H"])(r.patientLabTests,(function(t){return Object(a["B"])(),Object(a["g"])("div",L,[Object(a["k"])("div",null,[Object(a["k"])("div",E,[Object(a["k"])("span",null,Object(a["N"])(t.name),1),D]),Object(a["k"])("div",F,[Object(a["k"])("img",{src:r.getIconUrl(t),alt:"Image",style:{width:"50px",height:"50px"}},null,8,["src"])]),Object(a["k"])("div",null,[Object(a["k"])("span",z,[Object(a["k"])(o,{label:"Barcode",class:"p-button-sm",onClick:function(e){return r.printLabelJSPDF(r.patient,t)}},null,8,["onClick"]),Object(a["k"])(o,{class:"p-button-sm",icon:"pi pi-print",onClick:function(e){return r.printLabelJSPDF(r.patient,t)}},null,8,["onClick"])])])])])})),256))]),Object(a["k"])("div",J,[(Object(a["B"])(!0),Object(a["g"])(a["a"],null,Object(a["H"])(r.partnerLabTests,(function(t){return Object(a["B"])(),Object(a["g"])("div",G,[Object(a["k"])("div",null,[Object(a["k"])("div",U,[Object(a["k"])("span",null,Object(a["N"])(t.name),1),V]),Object(a["k"])("div",A,[Object(a["k"])("img",{src:r.getIconUrl(t),alt:"Image",style:{width:"50px",height:"50px"}},null,8,["src"])]),Object(a["k"])("div",null,[Object(a["k"])("span",M,[Object(a["k"])(o,{label:"Barcode",class:"p-button-sm",onClick:function(e){return r.printLabelJSPDF(r.partner,t)}},null,8,["onClick"]),Object(a["k"])(o,{class:"p-button-sm",icon:"pi pi-print",onClick:function(e){return r.printLabelJSPDF(r.patient,t)}},null,8,["onClick"])])])])])})),256))])])])])):(Object(a["B"])(),Object(a["g"])("div",W,[Z]))})),X=n("3835"),q=n("1da1"),K=(n("96cf"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("c215")),Q=n("5502"),Y=n("dd6d"),$=n("5fb0"),tt=n("db49"),et=n("6c02"),nt=n("62c5"),at=n.n(nt),rt=n("8baf"),ct=n("a01c"),it={setup:function(){var t=function(t){var e="".concat($["v"],"/patient_zpl_print.php"),n="".concat(e)+"?first_name=".concat(t.firstName)+"&last_name=".concat(t.lastName)+"&chart=".concat(t.chart)+"&dob=".concat(t.year,"-").concat(t.month,"-").concat(t.day)+"&gender=".concat(t.sex);window.open(n)},e=Object(Q["b"])(),n=Object(a["G"])([]),r=Object(a["G"])([]),c=Object(a["G"])([]),i=Object(a["G"])(!1),o=Object(a["G"])({}),l=Object(a["G"])({}),s=Object(a["G"])(null),p=Object(a["G"])(null),d=Object(et["d"])(),b=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!o.value.id){t.next=11;break}return t.next=4,Promise.all([K["a"].get("photo/by-patient/".concat(o.value.id)),l.value.id?K["a"].get("photo/by-patient/".concat(l.value.id)):Promise.resolve({data:{photo:null,content_type:null}})]);case 4:a=t.sent,r=Object(X["a"])(a,2),c=r[0],i=r[1],s.value=null!==(e=c.data)&&void 0!==e&&e.photo?"data:".concat(c.data.content_type,";base64,").concat(c.data.photo):null,p.value=null!==(n=i.data)&&void 0!==n&&n.photo?"data:".concat(i.data.content_type,";base64,").concat(i.data.photo):null,console.log("Loaded photos:",{patientPhoto:s.value,partnerPhoto:p.value});case 11:t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("Error loading photos:",t.t0),s.value=null,p.value=null;case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),u=function(t){var e={bar_id:t.id},n="".concat($["k"],"/jrsPHPclientV2/jrs/generate_reportn1.php?report_name=TESTS_1&report_type=pdf&report_params=").concat(encodeURIComponent(Object(Y["a"])(e)));window.open(n)},m=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K["a"].post("lab-barcode/create",{patient_id:e.id,container_id:n.labTestId,container_name:n.name});case 3:a=t.sent,r=a.data,c={bar_id:r.model.barcode},i="".concat($["k"],"/jrsPHPclientV2/jrs/generate_reportn1.php?report_name=TESTS_1_1&report_type=pdf&report_params=").concat(encodeURIComponent(Object(Y["a"])(c))),window.open(i),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K["a"].post("lab-barcode/create",{patient_id:e.id,container_id:n.labTestId,container_name:n.name});case 3:a=t.sent,r=a.data,c="".concat($["v"],"/labContainer_zpl_print.php"),i="".concat(c)+"?barcode=".concat(r.model.barcode,"&label=").concat(n.name,"&chartid=").concat(e.id),window.open(i),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,c,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K["a"].post("lab-barcode/create",{patient_id:e.id,container_id:n.labTestId,container_name:n.name});case 3:a=t.sent,r=a.data,c=r.model.barcode,i='\n<html>\n<head>\n  <style>\n    @page {\n    size: 10mm 38mm;\n    margin: 0;\n  }\n\n  html, body {\n    width: 10mm;\n    height: 38mm;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  .label {\n    width: 10mm;        /* original height */\n    height: 38mm;       /* original width */\n    transform: rotate(-90deg);\n    transform-origin: top left;\n    position: absolute;\n    top: 0;\n    left: -38mm; /* ‚Üê shift left so rotated label appears in view */\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    font-family: Arial, sans-serif;\n  }\n\n  .top-text {\n    height: 5mm;\n    padding-left: 1mm;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  .text1 {\n    font-size: 7pt;\n    line-height: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .text2 {\n    font-size: 5pt;\n    line-height: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .barcode {\n    height: 5mm;\n    padding: 0 1mm;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n  </style>\n</head>\n<body>\n  <div class="label">\n    <div class="top-text">\n        <div class="text1">'.concat(n.name," ").concat(e.firstName," ").concat(e.lastName,'</div>\n        <div class="text2">').concat(e.id,'</div>\n    </div>\n    <div class="barcode">\n      <svg id="barcode"></svg>\n    </div>\n  </div>\n</body>\n</html>\n'),o=document.createElement("iframe"),o.style.display="none",document.body.appendChild(o),l=o.contentWindow.document,l.open(),l.write(i),l.close(),o.onload=function(){var t=l.createElement("script");t.src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js",t.onload=function(){o.contentWindow.JsBarcode("#barcode",c,{format:"CODE128",width:2.4,height:38,lineColor:"#000",displayValue:!1,margin:0}),setTimeout((function(){return o.contentWindow.print()}),300)},l.body.appendChild(t)},t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),console.error("Print label error:",t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,n){return t.apply(this,arguments)}}(),j=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,c,i,o,l,s,p,d,b,u,m,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K["a"].post("lab-barcode/create",{patient_id:e.id,container_id:n.labTestId,container_name:n.name});case 3:return a=t.sent,r=a.data,c=r.model.barcode,i="".concat(n.name," ").concat(e.firstName," ").concat(e.lastName),o=document.createElement("svg"),at()(o,c,{format:"CODE128",width:4,height:40,displayValue:!1,margin:0}),o.removeAttribute("xmlns"),l=document.createElement("canvas"),l.width=200,l.height=40,s=l.getContext("2d"),p=(new XMLSerializer).serializeToString(o),t.next=17,ct["a"].from(s,p);case 17:return d=t.sent,t.next=20,d.render();case 20:b=l.toDataURL("image/png"),u=new rt["a"]({orientation:"landscape",unit:"mm",format:[38,10]}),u.setFontSize(6),u.text(i,1,2),u.setFontSize(5),u.text(String(e.id),1,4),u.addImage(b,"PNG",1,6,36,3.5),m=u.output("blob"),h=URL.createObjectURL(m),f=document.createElement("iframe"),f.style.position="fixed",f.style.right="0",f.style.bottom="0",f.style.width="0",f.style.height="0",f.style.border="0",f.src=h,document.body.appendChild(f),f.onload=function(){f.contentWindow.focus(),f.contentWindow.print()},t.next=44;break;case 41:t.prev=41,t.t0=t["catch"](0),console.error("Print label error:",t.t0);case 44:case"end":return t.stop()}}),t,null,[[0,41]])})));return function(e,n){return t.apply(this,arguments)}}(),g=function(t){return t.icon?"".concat(tt["g"],"/").concat(t.icon):"https://via.placeholder.com/300"},v=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"M"!=e&&"m"!=e||(e="male"),"F"!=e&&"f"!=e||(e="female"),t.next=4,K["a"].get("lab-tests/list/".concat(e),{params:{}});case 4:n=t.sent,a=n.data,r.value=a;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"M"!=e&&"m"!=e||(e="male"),"F"!=e&&"f"!=e||(e="female"),t.next=4,K["a"].get("lab-tests/list/".concat(e),{params:{}});case 4:n=t.sent,a=n.data,c.value=a;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a["z"])((function(){console.log(e.state.artCycle.patient),e.state.artCycle.patient&&(o.value=e.state.artCycle.patient,v(o.value.sex)),e.state.artCycle.partner&&(l.value=e.state.artCycle.partner,O(l.value.sex)),b()})),{logsData:n,loading:i,patient:o,partner:l,patientPhoto:s,partnerPhoto:p,store:e,patientLabTests:r,partnerLabTests:c,showBarcodeV2:u,getIconUrl:g,printToZebraPrinter:t,createBarcodeJasper:m,createBarcodeZebra:h,printCitizenLabel:f,printLabelJSPDF:j,goToBarcodePage:function(){d.push({path:"/barcodes"})}}}},ot=(n("de9a"),n("6b0d")),lt=n.n(ot);const st=lt()(it,[["render",H],["__scopeId","data-v-8f8506e8"]]);e["default"]=st}}]);
//# sourceMappingURL=chunk-fb476622.4b556cd5.js.map