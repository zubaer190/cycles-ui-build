{"version":3,"sources":["webpack:///./src/views/consent-forms.vue","webpack:///./src/views/consent-forms.vue?2870","webpack:///./node_modules/vue-demi/lib/index.mjs"],"names":["style","class","left","icon","goBack","disabled","menu","name","label","mailEmailIdForm","loading","items","item","index","key","handleMenuClick","right","subMenu","exportBlankPdf","setup","store","fullMenu","toast","getMenu","value","a","get","data","getForm","formKey","changeMneu","state","artCycle","patient","id","url","params","demographic_no","user_name","user","username","form_name","add","severity","summary","detail","life","patientId","console","log","link_key","window","open","demographicno","menuName","findIndex","parent","__exports__","render"],"mappings":"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","file":"js/chunk-11eda066.43f9fe25.js","sourcesContent":["<template>\r\n    <div style=\"width: 600px; margin: auto\">\r\n        <h1>Consent forms</h1>\r\n\r\n        <p-toolbar style=\"margin-bottom: 10px\">\r\n            <template #left>\r\n                <p-button\r\n                    icon=\"pi pi-chevron-left\"\r\n                    @click=\"goBack\"\r\n                    :disabled=\"menu != null && menu.name == 'MainMenu'\"\r\n                />\r\n                &nbsp;&nbsp;&nbsp;\r\n                <p-button\r\n                    label=\"Email ID Cards\"\r\n                    @click=\"mailEmailIdForm\"\r\n                    v-if=\"menu != null && menu.name == 'MainMenu'\"\r\n                />\r\n            </template>\r\n            <template #right v-if=\"loading\">\r\n                <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.5rem\"></i>\r\n            </template>\r\n        </p-toolbar>\r\n\r\n        <template v-if=\"menu\">\r\n            <div v-for=\"(item, index) in menu.items\">\r\n                <div>\r\n                    <p-toolbar\r\n                        :key=\"index\"\r\n                        style=\"margin-bottom: 10px; cursor: pointer;\"\r\n                        @click=\"handleMenuClick(item)\"\r\n                    >\r\n                        <template #left>\r\n                            <div style=\"font-size: 1.5rem; width: 100%;\">\r\n                                <span>{{ item.label }}</span>\r\n                            </div>\r\n                        </template>\r\n\r\n                        <template #right>\r\n                            <i\r\n                                class=\"pi pi-arrow-right\"\r\n                                v-if=\"item.subMenu != null\"\r\n                            ></i>\r\n                            &nbsp;&nbsp;&nbsp;\r\n\r\n                            <span\r\n                                v-if=\"item.subMenu == null\"\r\n                                @click.stop=\"exportBlankPdf(item)\"\r\n                                style=\"text-decoration:underline; color:blue;\"\r\n                                >Export</span\r\n                            >\r\n                        </template>\r\n                    </p-toolbar>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref } from \"vue-demi\";\r\nimport axios from \"axios\";\r\nimport { useStore } from \"vuex\";\r\nimport { NL_FORM_BASE } from \"@/constants\";\r\nimport { useToast } from \"primevue/usetoast\";\r\nexport default {\r\n    setup() {\r\n        const store = useStore();\r\n        const fullMenu = ref([]);\r\n        const menu = ref(null);\r\n        const loading = ref(false);\r\n        const toast = useToast();\r\n\r\n        const getMenu = async () => {\r\n            loading.value = true;\r\n            try {\r\n                const { data } = await axios.get(\r\n                    `${NL_FORM_BASE}/nlforms/get_menu.php`\r\n                );\r\n                fullMenu.value = data;\r\n                menu.value = data[0];\r\n            } catch (err) {\r\n            } finally {\r\n                loading.value = false;\r\n            }\r\n        };\r\n\r\n        const handleMenuClick = (item) => {\r\n            if (item.subMenu == null) {\r\n                getForm(item.formKey);\r\n            } else {\r\n                changeMneu(item.subMenu);\r\n            }\r\n        };\r\n\r\n        const mailEmailIdForm = async () => {\r\n            if (\r\n                store.state.artCycle.patient !== null &&\r\n                store.state.artCycle.patient.id !== null\r\n            ) {\r\n                let url = `${NL_FORM_BASE}/nlforms/email_single_form.php`;\r\n                try {\r\n                    const { data } = await axios.get(url, {\r\n                        params: {\r\n                            demographic_no: store.state.artCycle.patient.id,\r\n                            user_name: store.state.user.username,\r\n                            form_name: \"photo-id-card\"\r\n                        }\r\n                    });\r\n                    toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Successful\",\r\n                        detail: \"Email Sent\",\r\n                        life: 3000\r\n                    });\r\n                } catch (error) {\r\n                    toast.add({\r\n                        severity: \"warn\",\r\n                        summary: \"Successful\",\r\n                        detail: \"Problem occurred when sending email\",\r\n                        life: 3000\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        const getForm = async (formKey) => {\r\n            let patientId = 0;\r\n            if (\r\n                store.state.artCycle.patient !== null &&\r\n                store.state.artCycle.patient.id !== null\r\n            ) {\r\n                patientId = store.state.artCycle.patient.id;\r\n            }\r\n\r\n            console.log(store.state.artCycle.patient);\r\n\r\n            let url = `${NL_FORM_BASE}/nlforms/get_form_url.php`;\r\n            try {\r\n                const { data } = await axios.get(url, {\r\n                    params: {\r\n                        demographic_no: patientId,\r\n                        user_name: store.state.user.username,\r\n                        link_key: formKey\r\n                    }\r\n                });\r\n                window.open(data.url, \"_blank\");\r\n            } catch (error) {}\r\n        };\r\n\r\n        const exportBlankPdf = async (item) => {\r\n            let patientId = 0;\r\n            if (\r\n                store.state.artCycle.patient !== null &&\r\n                store.state.artCycle.patient.id !== null\r\n            ) {\r\n                patientId = store.state.artCycle.patient.id;\r\n            }\r\n\r\n            let url = `${NL_FORM_BASE}/nlforms/export_theform_pdf.php`;\r\n            try {\r\n                const { data } = await axios.get(url, {\r\n                    params: {\r\n                        demographicno: patientId,\r\n                        username: store.state.user.username,\r\n                        link_key: item.formKey\r\n                    }\r\n                });\r\n                window.open(data.url, \"_blank\");\r\n            } catch (error) {}\r\n        };\r\n\r\n        const changeMneu = (menuName) => {\r\n            let index = fullMenu.value.findIndex(\r\n                (item) => item.name == menuName\r\n            );\r\n            menu.value = fullMenu.value[index];\r\n        };\r\n\r\n        const goBack = () => {\r\n            if (menu.value.parent) {\r\n                let index = fullMenu.value.findIndex(\r\n                    (item) => item.name == menu.value.parent\r\n                );\r\n                menu.value = fullMenu.value[index];\r\n            }\r\n        };\r\n\r\n        onMounted(() => {\r\n            getMenu();\r\n        });\r\n\r\n        return {\r\n            menu,\r\n            loading,\r\n            mailEmailIdForm,\r\n            handleMenuClick,\r\n            exportBlankPdf,\r\n            goBack\r\n        };\r\n    }\r\n};\r\n</script>\r\n","import { render } from \"./consent-forms.vue?vue&type=template&id=edb2cba0\"\nimport script from \"./consent-forms.vue?vue&type=script&lang=js\"\nexport * from \"./consent-forms.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\newlife\\\\vue-cycle-ui\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n"],"sourceRoot":""}