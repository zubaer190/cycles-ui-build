{"version":3,"sources":["webpack:///./src/assets/women.png","webpack:///./src/views/barcodes/patient-scan-history-modal.vue?7438","webpack:///./src/views/barcodes/scan.vue","webpack:///./src/views/barcodes/patient-scan-history-modal.vue","webpack:///./src/views/barcodes/scan.vue?133f","webpack:///./src/views/barcodes/scan.vue?6e47","webpack:///./node_modules/vue-demi/lib/index.mjs"],"names":["module","exports","class","style","src","value","type","scannedBarcode","placeholder","id","handleBarcodeScan","ref","fopcusOut","scan_items","item","index","key","title","firstName","lastName","dob","gender","scannedAt","icon","closeBlockItem","label","showHistoryDialog","selectedOption","saveScanItems","setup","store","inputRef","loading","focusing","toast","personId","patient","partner","historyDialog","historyData","console","log","closeHistoryDialog","addScannedItem","barcodeExists","some","existingItem","push","processBarcodeData","barcode","length","get","params","data","scannedItem","logo","patientFirstName","patientLastName","patientDOB","sex","scannedAT","containerName","splice","payload","action","patientId","scannedItems","post","add","severity","summary","detail","life","focusInput","focus","render"],"mappings":"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","file":"js/chunk-aef906ee.e1b7dc93.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/women.f05f7bfb.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./patient-scan-history-modal.vue?vue&type=style&index=0&id=e46a8940&scoped=true&lang=css\"","<template>\r\n    <div class=\"title-and-input\" style=\"margin-bottom:5px;\">\r\n        <input\r\n            type=\"text\"\r\n            class=\"p-inputtext\"\r\n            v-model=\"scannedBarcode\"\r\n            placeholder=\"Scan Barcode\"\r\n            id=\"barcode-scanner\"\r\n            @keyup.enter=\"handleBarcodeScan\"\r\n            ref=\"inputRef\"\r\n            v-on:blur=\"fopcusOut\"\r\n            style=\"width:250px;\"\r\n        />\r\n    </div>\r\n    <div>\r\n        <div class=\"section\">\r\n            <div>\r\n                <div\r\n                    style=\"display: inline-block;\"\r\n                    v-for=\"(item, index) in scan_items\"\r\n                    :key=\"index\"\r\n                >\r\n                    <div\r\n                        class=\"block-item\"\r\n                        :style=\"{\r\n                            'background-color':\r\n                                item.type !== 'person' ? '#FC94AF' : '#FFFFFF'\r\n                        }\"\r\n                    >\r\n                        <div style=\"margin-right: 15px; \">\r\n                            <p>{{ item.title }}</p>\r\n                            <img\r\n                                v-if=\"item.type === 'person'\"\r\n                                style=\"width: 100px; height: 100px;\"\r\n                                src=\"../../assets/women.png\"\r\n                            />\r\n                            <p v-else style=\"width: 100px; height: 100px; ;\" />\r\n                        </div>\r\n                        <div\r\n                            class=\"inner-block\"\r\n                            :style=\"{\r\n                                'background-color':\r\n                                    item.type !== 'person'\r\n                                        ? '#D4A373'\r\n                                        : '#d3D3D3'\r\n                            }\"\r\n                        >\r\n                            <div\r\n                                style=\"margin-bottom: 10px; display: flex; justify-content: space-between;\"\r\n                            >\r\n                                <div\r\n                                    style=\"display: flex; flex-direction: column; gap: 2px;\"\r\n                                >\r\n                                    <span>{{ item.id }}</span>\r\n                                    <span>{{ item.firstName }}</span>\r\n                                    <span>{{ item.lastName }}</span>\r\n                                    <span>{{ item.dob }}</span>\r\n                                    <span>{{ item.gender }}</span>\r\n                                    <span>{{ item.scannedAt }}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <p-button\r\n                                        icon=\"pi pi-times\"\r\n                                        class=\"p-button-sm\"\r\n                                        @click=\"closeBlockItem(item, index)\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <p-button\r\n                                    label=\"Show History\"\r\n                                    :style=\"{\r\n                                        width: 200 + 'px'\r\n                                    }\"\r\n                                    @click=\"showHistoryDialog\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"bottom-right\">\r\n        <select v-model=\"selectedOption\" style=\"width: 200px; height: 40px; margin-right: 10px; border-radius: 3px;\">\r\n            <option value=\"option1\">Option 1</option>\r\n            <option value=\"option2\">Option 2</option>\r\n            <!-- Add more options as needed -->\r\n        </select>\r\n        <p-button\r\n            label=\"Save\"\r\n            class=\"p-button-lg\"\r\n            @click=\"saveScanItems\"\r\n        />              \r\n    </div>\r\n\r\n   <patient-scan-history-modal />\r\n\r\n</template>\r\n<script>\r\nimport { $axios } from \"@/service/app-http\";\r\nimport { onMounted, ref, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { serialize } from \"php-serialize\";\r\nimport { ZEBRA_PRING_URL, NL_FORM_BASE } from \"@/constants\";\r\nimport { ORIGIN } from \"./../../config\";\r\nimport { useToast } from \"primevue/usetoast\";\r\nimport { PatientScanHistoryModal } from \"@/views/barcodes/patient-scan-history-modal.vue\";\r\n\r\nexport default {\r\n    setup() {\r\n        const store = useStore();\r\n        const inputRef = ref(null);\r\n        const loading = ref(false);\r\n        const scannedBarcode = ref(null);\r\n\r\n         let focusing = false; // A flag to track if focusing is in progress\r\n\r\n        const toast = useToast();\r\n        const personId = ref(null);\r\n        const selectedOption =  ref(null);\r\n        const patient = ref({});\r\n        const partner = ref({});\r\n        const historyDialog = ref(false);\r\n        const historyData = ref([]);\r\n        const scan_items = ref([]);\r\n\r\n\r\n        const showHistoryDialog = () => {\r\n            console.log('here');\r\n            historyDialog.value = true;\r\n        };\r\n\r\n        const closeHistoryDialog = () => {\r\n            historyDialog.value = false;\r\n        };\r\n\r\n        // Function to add a scanned item to scan_items if it's not already present\r\n        const addScannedItem = (item) => {\r\n            const barcodeExists = scan_items.value.some(\r\n                (existingItem) => existingItem.id === item.id\r\n            );\r\n            if (!barcodeExists) {\r\n                scan_items.value.push(item);\r\n            }\r\n        };\r\n\r\n        // Function to handle barcode scanning\r\n        const handleBarcodeScan = () => {\r\n   \r\n            // Process barcode data and create the item object\r\n            // Replace the following line with your barcode data processing logic\r\n            processBarcodeData(scannedBarcode.value);\r\n            scannedBarcode.value = \"\";\r\n        };\r\n\r\n        // Example function for processing barcode data\r\n        const processBarcodeData = async (barcode) => {\r\n            if(scan_items.value.length == 0) {\r\n\r\n                try {\r\n                    // get person data axsios\r\n                    const { data } = await $axios.get(`lab-barcode/get-person-data/${barcode}`, {\r\n                        params: {}\r\n                    });\r\n\r\n                    personId.value = data.barcode;\r\n                    const scannedItem = {\r\n                        id: data.barcode,\r\n                        type: \"person\",\r\n                        title: \"_\",\r\n                        logo: \"logo1\",\r\n                        firstName: data.patientFirstName,\r\n                        lastName: data.patientLastName,\r\n                        dob: data.patientDOB,\r\n                        gender: data.sex,\r\n                        scannedAt: data.scannedAT\r\n                    };\r\n                \r\n                    addScannedItem(scannedItem);\r\n\r\n                 } catch (err) {}\r\n\r\n            } else {\r\n                try {\r\n                    if(personId.value !== null) {\r\n\r\n                        // get barcode data axios\r\n                        const { data } = await $axios.get(`lab-barcode/get-barcode-data/${personId.value}/${barcode}`, {\r\n                            params: {}\r\n                        });\r\n\r\n                        const scannedItem = {\r\n                            id: data.barcode,\r\n                            type: \"container\",\r\n                            title: data.containerName,\r\n                            logo: \"logo1\",\r\n                            firstName: data.patientFirstName,\r\n                            lastName: data.patientLastName,\r\n                            dob: data.patientDOB,\r\n                            gender: data.sex,\r\n                            scannedAt: data.scannedAT\r\n                        };\r\n                        \r\n                        addScannedItem(scannedItem);\r\n                    }\r\n\r\n                } catch (err) {}\r\n                \r\n\r\n            }\r\n        };\r\n\r\n        const closeBlockItem = (item, index) => {\r\n            // Use splice to remove the item from scan_items by index\r\n            \r\n            if(item.type === \"person\") scan_items.value = [];\r\n            else scan_items.value.splice(index, 1);\r\n        };\r\n\r\n        const saveScanItems = async () => {\r\n            // console.log('Scan items data:', scan_items.value);\r\n\r\n            if(selectedOption !== null || selectedOption !== '') {\r\n                // console.log(selectedOption.value)\r\n\r\n                const payload = {\r\n                    action: selectedOption.value,\r\n                    patientId: personId.value,\r\n                    scannedItems: scan_items.value,\r\n                };\r\n\r\n                 try {\r\n                    const { data } = await $axios.post(`lab-barcode/save-scans`, payload);\r\n                    console.log(data);\r\n\r\n                    toast.add({\r\n                        severity: 'success',\r\n                        summary: 'Success',\r\n                        detail: 'Scan items saved successfully',\r\n                        life: 5000, // Adjust this value as needed\r\n                    });\r\n                } catch (err) {}\r\n            }\r\n        }\r\n            \r\n\r\n        onMounted(() => {\r\n            //console.log(store.state.artCycle.patient);\r\n            focusInput();\r\n        });\r\n\r\n        // Watch for changes in the \"scannedBarcode\" variable to trigger refocusing\r\n        watch(scannedBarcode, () => {\r\n            if (!focusing) {\r\n                // If the input loses focus and \"scannedBarcode\" changes, refocus it\r\n                focusInput();\r\n            }\r\n        });\r\n\r\n        // Function to focus the input field\r\n        const focusInput = () => {\r\n            focusing = true;\r\n            if (inputRef.value) {\r\n                inputRef.value.focus();\r\n            }\r\n            focusing = false;\r\n        };\r\n\r\n        const fopcusOut = () => {\r\n           focusing = false; \r\n           focusInput();\r\n        }\r\n\r\n        return {\r\n            loading,\r\n            patient,\r\n            partner,\r\n            store,\r\n            scan_items,\r\n            scannedBarcode,\r\n            handleBarcodeScan,\r\n            closeBlockItem,\r\n            saveScanItems,\r\n            selectedOption,\r\n            toast,\r\n            inputRef,\r\n            fopcusOut,\r\n            historyDialog,\r\n            historyData,\r\n            showHistoryDialog,\r\n            closeHistoryDialog\r\n\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.p-card .p-card-content {\r\n    padding: 0;\r\n}\r\n\r\n.block-item {\r\n    display: flex;\r\n    border: 1px solid #8cb3d9;\r\n    padding: 10px;\r\n    margin-right: 10px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.title-and-input {\r\n    display: flex;\r\n    gap: 5px;\r\n    align-items: center; /* Vertically center the elements */\r\n}\r\n\r\n.inner-block {\r\n    padding: 10px;\r\n}\r\n\r\n.bottom-right {\r\n  position: fixed;\r\n  bottom: 50px;\r\n  right: 50px;\r\n}\r\n</style>\r\n","import { render } from \"./patient-scan-history-modal.vue?vue&type=template&id=e46a8940&scoped=true\"\nimport script from \"./patient-scan-history-modal.vue?vue&type=script&lang=js\"\nexport * from \"./patient-scan-history-modal.vue?vue&type=script&lang=js\"\n\nimport \"./patient-scan-history-modal.vue?vue&type=style&index=0&id=e46a8940&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\newlife\\\\vue-cycle-ui\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e46a8940\"]])\n\nexport default __exports__","import { render } from \"./scan.vue?vue&type=template&id=9154c0c4&scoped=true\"\nimport script from \"./scan.vue?vue&type=script&lang=js\"\nexport * from \"./scan.vue?vue&type=script&lang=js\"\n\nimport \"./scan.vue?vue&type=style&index=0&id=9154c0c4&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\newlife\\\\vue-cycle-ui\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9154c0c4\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./scan.vue?vue&type=style&index=0&id=9154c0c4&scoped=true&lang=css\"","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n"],"sourceRoot":""}