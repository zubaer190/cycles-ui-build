{"version":3,"sources":["webpack:///./src/views/maintanance/born-uncomplete-list.vue","webpack:///./src/views/maintanance/born-uncomplete-list.vue?da74"],"names":["class","style","value","completeList","selection","selectedList","dataKey","showGridlines","responsiveLayout","loading","scrollable","scrollHeight","header","cycleYear","cycleYearRequired","sourceFilter","options","sourceFilterOpts","optionLabel","optionValue","cycleCancelled","cycleCancelledOption","cycleType","cycleTypeOptions","label","filter","download","footer","rows","totalRecords","rowsPerPageOptions","onPage","$event","selectionMode","headerStyle","field","body","data","ohip","cycleDate","split","setup","store","uploaded","page","perPage","state","artCycle","getUncompleteList","map","item","toUpperCase","total","event","cyclePayload","cycleId","patientId","payload","cycle","resp","status","window","open","csv","markAsUploadHandler","__exports__","render"],"mappings":"wKAciBA,MAAM,eAAeC,MAAA,kB,EACtB,eAA+C,SAAxCD,MAAM,iBAAgB,cAAU,G,EAOvC,eAA2C,SAApCA,MAAM,iBAAgB,UAAM,G,EAUnC,eAAoD,SAA7CA,MAAM,iBAAgB,mBAAe,G,EAU5C,eAA+C,SAAxCA,MAAM,iBAAgB,cAAU,G,kRAzCnD,eA4He,GA3HVE,MAAO,EAAAC,aACAC,UAAW,EAAAC,a,oDAAA,EAAAA,aAAY,IAE/BC,QAAQ,UACRN,MAAM,iBACNO,cAAA,GACAC,iBAAiB,SAChBC,QAAS,EAAAA,QACTC,YAAY,EACbC,aAAa,uB,CAEFC,OAAM,gBACb,iBAiDM,CAjDN,eAiDM,MAjDN,EAiDM,CAhDF,EACA,eAIE,G,WAHW,EAAAC,U,qDAAA,EAAAA,UAAS,IAClBb,MAAK,CAAC,SAAQ,aACS,EAAAc,qB,+BAG3B,EACA,eAOE,G,WANW,EAAAC,a,qDAAA,EAAAA,aAAY,IACpBC,QAAS,EAAAC,iBACVC,YAAY,QACZC,YAAY,QACZnB,MAAM,SACNC,MAAA,iB,iCAGJ,EACA,eAOE,G,WANW,EAAAmB,e,qDAAA,EAAAA,eAAc,IACtBJ,QAAS,EAAAK,qBACVH,YAAY,QACZC,YAAY,QACZlB,MAAA,eACAD,MAAM,U,iCAGV,EACA,eAOE,G,WANW,EAAAsB,U,qDAAA,EAAAA,UAAS,IACjBN,QAAS,EAAAO,iBACVL,YAAY,QACZC,YAAY,QACZnB,MAAM,SACNC,MAAA,iB,iCAGJ,eAIE,GAHEuB,MAAM,SACNxB,MAAM,qBACL,QAAO,EAAAyB,Q,oBAGZ,eAIE,GAHED,MAAM,aACNxB,MAAM,sCACL,QAAO,EAAA0B,U,0BAwDTC,OAAM,gBACb,iBAKE,CALF,eAKE,GAJGC,KAAM,GACNC,aAAc,EAAAA,aACdC,mBAAoB,CAAC,GAAI,GAAI,KAC7B,OAAI,+BAAE,EAAAC,OAAOC,M,qDAxDtB,iBAIE,CAJF,eAIE,GAHEC,cAAc,WACdC,YAAY,aACZjC,MAAA,oCAEJ,eAAsD,GAA5CkC,MAAM,cAAcvB,OAAO,iBACrC,eAIE,GAHEuB,MAAM,YACNvB,OAAO,WACPX,MAAA,wBAEJ,eAIE,GAHEkC,MAAM,gBACNvB,OAAO,iBACPX,MAAA,wBAEJ,eAIE,GAHEkC,MAAM,UACNvB,OAAO,eACPX,MAAA,wBAEJ,eAAsE,GAA5DkC,MAAM,UAAUvB,OAAO,WAAWX,MAAA,uBAC5C,eAIE,GAHEkC,MAAM,YACNvB,OAAO,aACPX,MAAA,uBAEJ,eAIE,GAHEkC,MAAM,cACNvB,OAAO,gBACPX,MAAA,uBAEJ,eAIW,GAJDkC,MAAM,OAAOvB,OAAO,SAASX,MAAA,sB,CACxBmC,KAAI,gBACX,gBADeC,EACf,EADeA,KACf,MADmB,C,8BACP,GAATA,EAAKC,KAAI,mB,MAGpB,eAQW,GAPPH,MAAM,YACNvB,OAAO,aACPX,MAAA,uB,CAEWmC,KAAI,gBACX,gBADeC,EACf,EADeA,KACf,MADmB,C,8BAChBA,EAAKE,UAAUC,MAAK,gB,MAI/B,eAA2C,GAAjCL,MAAM,SAASvB,OAAO,WAEhC,eAAqB,O,4HAuBd,GACX6B,MADW,WAEP,IAAMC,EAAQ,iBAERvC,EAAe,eAAI,IACnBE,EAAe,eAAI,IACnBI,EAAU,gBAAI,GACdoB,EAAe,eAAI,GACnBc,EAAW,gBAAI,GACf9B,EAAY,iBACZ+B,EAAO,eAAI,GACXC,EAAU,eAAI,IACd9B,EAAe,eAAI,IACnBE,EAAmB,eAAI,CACzB,CAAEf,MAAO,mBAAoBsB,MAAO,oBACpC,CAAEtB,MAAO,MAAOsB,MAAO,OACvB,CAAEtB,MAAO,YAAasB,MAAO,aAC7B,CAAEtB,MAAO,gBAAiBsB,MAAO,iBACjC,CAAEtB,MAAO,kBAAmBsB,MAAO,qBAEjCV,EAAoB,gBAAI,GAExBM,EAAiB,eAAI,MACrBC,EAAuB,eAAI,CAC7B,CAAEG,MAAO,MAAOtB,MAAO,OACvB,CAAEsB,MAAO,KAAMtB,MAAO,MACtB,CAAEsB,MAAO,MAAOtB,MAAO,SAGrBoB,EAAY,eAAI,MAChBC,EAAmB,gBACrB,kBAAMmB,EAAMI,MAAMC,SAASxB,oBAGzByB,EAAgB,yDAAI,2GACC,MAAnBnC,EAAUX,OAAoC,IAAnBW,EAAUX,MADnB,uBAElBY,EAAkBZ,OAAQ,EAFR,iCAKtBY,EAAkBZ,OAAQ,EAC1BO,EAAQP,OAAQ,EANM,SAOQ,eAC1B0C,EAAK1C,MACL2C,EAAQ3C,MACRW,EAAUX,MACVa,EAAab,MACbkB,EAAelB,MACfoB,EAAUpB,MAAM+C,KAAI,SAACC,GAAD,OAAUA,EAAKC,kBAbjB,gBAOdd,EAPc,EAOdA,KAAMe,EAPQ,EAORA,MAQdjD,EAAaD,MAAQmC,EACrBR,EAAa3B,MAAQkD,EACrB3C,EAAQP,OAAQ,EAChBG,EAAaH,MAAQ,GAlBC,4CAAJ,qDAqBhB6B,EAAS,SAACsB,GACZT,EAAK1C,MAAQmD,EAAMT,KAAO,EAC1BC,EAAQ3C,MAAQmD,EAAMzB,KACtBoB,KAGEM,EAAe,WACjB,OAAOjD,EAAaH,MAAM+C,KAAI,SAACC,GAAD,MAAW,CACrCK,QAASL,EAAKK,QACdC,UAAWN,EAAKM,eAIlB9B,EAAO,yDAAI,6GACP+B,EAAU,CACZC,MAAOJ,KAFE,SAKM,eAAgBG,GALtB,UAKPE,EALO,OAMM,UAAfA,EAAKC,OANI,iDAQbC,OAAOC,KAAP,UAAe,OAAf,YAAyBH,EAAKI,MAC9B1D,EAAaH,MAAQ,GATR,2CAAJ,qDAYP8D,EAAkB,yDAAI,2GAClBP,EAAU,CACZC,MAAOJ,IACPM,OAAQ,GAHY,SAKlB,eAAaH,GALK,OAMxBT,IANwB,2CAAJ,qDASxB,MAAO,CACH7C,eACAE,eACAI,UACAkC,WACA9B,YACAC,oBACAe,eACAE,SACAL,WACAsC,sBACAvC,OAAQ,WACJuB,KAEJjC,eACAE,mBACAG,iBACAC,uBACAC,YACAC,sB,qBCjPZ,MAAM0C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d229045.a7fae690.js","sourcesContent":["<template>\n    <p-data-table\n        :value=\"completeList\"\n        v-model:selection=\"selectedList\"\n        selection\n        dataKey=\"cycleId\"\n        class=\"p-datatable-sm\"\n        showGridlines\n        responsiveLayout=\"scroll\"\n        :loading=\"loading\"\n        :scrollable=\"true\"\n        scrollHeight=\"calc(100vh - 130px)\"\n    >\n        <template #header>\n            <div class=\"table-header\" style=\"display: flex;\">\n                <label class=\"p-mr-2 p-mt-2\">Cycle Year</label>\n                <p-input-text\n                    v-model=\"cycleYear\"\n                    class=\"p-mr-2\"\n                    :class=\"{ 'p-invalid': cycleYearRequired }\"\n                />\n\n                <label class=\"p-mr-2 p-mt-2\">Filter</label>\n                <p-multi-select\n                    v-model=\"sourceFilter\"\n                    :options=\"sourceFilterOpts\"\n                    optionLabel=\"label\"\n                    optionValue=\"value\"\n                    class=\"p-mr-2\"\n                    style=\"width: 200px;\"\n                />\n\n                <label class=\"p-mr-2 p-mt-2\">Cycle Cancelled</label>\n                <p-dropdown\n                    v-model=\"cycleCancelled\"\n                    :options=\"cycleCancelledOption\"\n                    optionLabel=\"label\"\n                    optionValue=\"value\"\n                    style=\"width: 80px;\"\n                    class=\"p-mr-2\"\n                />\n\n                <label class=\"p-mr-2 p-mt-2\">Cycle Type</label>\n                <p-multi-select\n                    v-model=\"cycleType\"\n                    :options=\"cycleTypeOptions\"\n                    optionLabel=\"label\"\n                    optionValue=\"value\"\n                    class=\"p-mr-2\"\n                    style=\"width: 200px;\"\n                />\n\n                <p-button\n                    label=\"Filter\"\n                    class=\"p-mr-2 p-button-sm\"\n                    @click=\"filter\"\n                />\n\n                <p-button\n                    label=\"Export XLS\"\n                    class=\"p-mr-2 p-button-sm p-button-success\"\n                    @click=\"download\"\n                />\n            </div>\n        </template>\n\n        <p-column\n            selectionMode=\"multiple\"\n            headerStyle=\"width: 3em\"\n            style=\"width: 3rem; max-width: 3rem;\"\n        />\n        <p-column field=\"patientName\" header=\"Patient name\" />\n        <p-column\n            field=\"patientId\"\n            header=\"Chart ID\"\n            style=\"max-width: 12rem\"\n        />\n        <p-column\n            field=\"dateCompleted\"\n            header=\"Date Completed\"\n            style=\"max-width: 12rem\"\n        />\n        <p-column\n            field=\"cycleNo\"\n            header=\"Cycle Number\"\n            style=\"max-width: 10rem\"\n        />\n        <p-column field=\"cycleId\" header=\"Cycle id\" style=\"max-width: 7rem\" />\n        <p-column\n            field=\"cycleName\"\n            header=\"Cycle Type\"\n            style=\"max-width: 8rem\"\n        />\n        <p-column\n            field=\"cycleNoType\"\n            header=\"Cycle no type\"\n            style=\"max-width: 8rem\"\n        />\n        <p-column field=\"ohip\" header=\"Funded\" style=\"max-width: 7rem\">\n            <template #body=\"{ data }\">\n                {{ data.ohip == 1 ? \"Yes\" : \"No\" }}\n            </template>\n        </p-column>\n        <p-column\n            field=\"cycleDate\"\n            header=\"Cycle Date\"\n            style=\"max-width: 120px\"\n        >\n            <template #body=\"{ data }\">\n                {{ data.cycleDate.split(\" \")[0] }}\n            </template>\n        </p-column>\n\n        <p-column field=\"source\" header=\"Source\" />\n\n        <p-column></p-column>\n\n        <template #footer>\n            <p-paginator\n                :rows=\"20\"\n                :totalRecords=\"totalRecords\"\n                :rowsPerPageOptions=\"[20, 50, 100]\"\n                @page=\"onPage($event)\"\n            />\n        </template>\n    </p-data-table>\n</template>\n\n<script>\nimport { ORIGIN } from \"@/config\";\nimport {\n    getBornUncompleteList,\n    getBronCsvMulti,\n    markAsUpload\n} from \"@/service/art-cycle\";\nimport { computed, ref, watch, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n    setup() {\n        const store = useStore();\n\n        const completeList = ref([]);\n        const selectedList = ref([]);\n        const loading = ref(false);\n        const totalRecords = ref(0);\n        const uploaded = ref(false);\n        const cycleYear = ref();\n        const page = ref(1);\n        const perPage = ref(20);\n        const sourceFilter = ref([]);\n        const sourceFilterOpts = ref([\n            { value: \"cycle-monitoring\", label: \"Cycle monitoring\" },\n            { value: \"opu\", label: \"Opu\" },\n            { value: \"pregnancy\", label: \"Pregnancy\" },\n            { value: \"fertilization\", label: \"Fertilization\" },\n            { value: \"embryo-transfer\", label: \"Embryo transfer\" }\n        ]);\n        const cycleYearRequired = ref(false);\n\n        const cycleCancelled = ref(null);\n        const cycleCancelledOption = ref([\n            { label: \"Yes\", value: \"yes\" },\n            { label: \"No\", value: \"no\" },\n            { label: \"All\", value: \"all\" }\n        ]);\n\n        const cycleType = ref(null);\n        const cycleTypeOptions = computed(\n            () => store.state.artCycle.cycleTypeOptions\n        );\n\n        const getUncompleteList = async () => {\n            if (cycleYear.value == null || cycleYear.value == \"\") {\n                cycleYearRequired.value = true;\n                return;\n            }\n            cycleYearRequired.value = false;\n            loading.value = true;\n            const { data, total } = await getBornUncompleteList(\n                page.value,\n                perPage.value,\n                cycleYear.value,\n                sourceFilter.value,\n                cycleCancelled.value,\n                cycleType.value.map((item) => item.toUpperCase())\n            );\n            completeList.value = data;\n            totalRecords.value = total;\n            loading.value = false;\n            selectedList.value = [];\n        };\n\n        const onPage = (event) => {\n            page.value = event.page + 1;\n            perPage.value = event.rows;\n            getUncompleteList();\n        };\n\n        const cyclePayload = () => {\n            return selectedList.value.map((item) => ({\n                cycleId: item.cycleId,\n                patientId: item.patientId\n            }));\n        };\n\n        const download = async () => {\n            const payload = {\n                cycle: cyclePayload()\n            };\n\n            const resp = await getBronCsvMulti(payload);\n            if (resp.status == \"failed\") return;\n\n            window.open(`${ORIGIN}/${resp.csv}`);\n            selectedList.value = [];\n        };\n\n        const markAsUploadHandler = async () => {\n            const payload = {\n                cycle: cyclePayload(),\n                status: 1\n            };\n            await markAsUpload(payload);\n            getUncompleteList();\n        };\n\n        return {\n            completeList,\n            selectedList,\n            loading,\n            uploaded,\n            cycleYear,\n            cycleYearRequired,\n            totalRecords,\n            onPage,\n            download,\n            markAsUploadHandler,\n            filter: () => {\n                getUncompleteList();\n            },\n            sourceFilter,\n            sourceFilterOpts,\n            cycleCancelled,\n            cycleCancelledOption,\n            cycleType,\n            cycleTypeOptions\n        };\n    }\n};\n</script>\n","import { render } from \"./born-uncomplete-list.vue?vue&type=template&id=72ca6932\"\nimport script from \"./born-uncomplete-list.vue?vue&type=script&lang=js\"\nexport * from \"./born-uncomplete-list.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/zubaer/workspace/vue.js/vue-cycle-ui/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}