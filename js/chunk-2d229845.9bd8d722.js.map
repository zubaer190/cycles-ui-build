{"version":3,"sources":["webpack:///./src/views/maintanance/born-complete-list.vue","webpack:///./src/views/maintanance/born-complete-list.vue?3f4d"],"names":["class","style","value","completeList","selection","selectedList","dataKey","showGridlines","responsiveLayout","loading","scrollable","scrollHeight","header","uploaded","binary","label","filter","download","markAsUploadHandler","footer","rows","totalRecords","rowsPerPageOptions","onPage","$event","selectionMode","headerStyle","field","body","data","ohip","cycleDate","split","setup","page","perPage","getCompleteList","total","event","cyclePayload","map","item","cycleId","patientId","payload","cycle","resp","status","window","open","csv","__exports__","render"],"mappings":"wKAciBA,MAAM,eAAeC,MAAA,kB,EAOtB,eAA+D,SAAxDD,MAAM,SAASC,MAAA,sBAAyB,YAAQ,G,8MApBnE,eAsFe,GArFVC,MAAO,EAAAC,aACAC,UAAW,EAAAC,a,oDAAA,EAAAA,aAAY,IAE/BC,QAAQ,UACRN,MAAM,iBACNO,cAAA,GACAC,iBAAiB,SAChBC,QAAS,EAAAA,QACTC,YAAY,EACbC,aAAa,uB,CAEFC,OAAM,gBACb,iBAwBM,CAxBN,eAwBM,MAxBN,EAwBM,CAvBF,eAKE,G,WAJW,EAAAC,S,qDAAA,EAAAA,SAAQ,IAChBC,QAAQ,EACTd,MAAM,gBACNC,MAAA,sB,uBAEJ,EAEA,eAIE,GAHEc,MAAM,SACNf,MAAM,qBACL,QAAO,EAAAgB,Q,oBAEZ,eAIE,GAHED,MAAM,WACNf,MAAM,sCACL,QAAO,EAAAiB,U,oBAEZ,eAIE,GAHEF,MAAM,iBACNf,MAAM,sCACL,QAAO,EAAAkB,qB,0BA2CTC,OAAM,gBACb,iBAKE,CALF,eAKE,GAJGC,KAAM,GACNC,aAAc,EAAAA,aACdC,mBAAoB,CAAC,GAAI,GAAI,IAC7B,OAAI,+BAAE,EAAAC,OAAOC,M,qDA3CtB,iBAIE,CAJF,eAIE,GAHEC,cAAc,WACdC,YAAY,aACZzB,MAAA,oCAEJ,eAAsD,GAA5C0B,MAAM,cAAcf,OAAO,iBACrC,eAIE,GAHEe,MAAM,UACNf,OAAO,eACPX,MAAA,wBAEJ,eAAsE,GAA5D0B,MAAM,UAAUf,OAAO,WAAWX,MAAA,uBAC5C,eAIE,GAHE0B,MAAM,YACNf,OAAO,aACPX,MAAA,uBAEJ,eAIE,GAHE0B,MAAM,cACNf,OAAO,gBACPX,MAAA,uBAEJ,eAIW,GAJD0B,MAAM,OAAOf,OAAO,SAASX,MAAA,sB,CACxB2B,KAAI,gBACX,gBADeC,EACf,EADeA,KACf,MADmB,C,8BACP,GAATA,EAAKC,KAAI,mB,MAGpB,eAQW,GAPPH,MAAM,YACNf,OAAO,aACPX,MAAA,uB,CAEW2B,KAAI,gBACX,gBADeC,EACf,EADeA,KACf,MADmB,C,8BAChBA,EAAKE,UAAUC,MAAK,gB,MAG/B,eAAqB,O,4HAwBd,GACXC,MADW,WAEP,IAAM9B,EAAe,eAAI,IACnBE,EAAe,eAAI,IACnBI,EAAU,gBAAI,GACdY,EAAe,eAAI,GACnBR,EAAW,gBAAI,GACfqB,EAAO,eAAI,GACXC,EAAU,eAAI,IAEdC,EAAc,yDAAI,+GACpB3B,EAAQP,OAAQ,EADI,SAEU,eAC1BgC,EAAKhC,MACLiC,EAAQjC,MACRW,EAASX,MAAQ,EAAI,GALL,gBAEZ2B,EAFY,EAEZA,KAAMQ,EAFM,EAENA,MAKdlC,EAAaD,MAAQ2B,EACrBR,EAAanB,MAAQmC,EACrB5B,EAAQP,OAAQ,EAChBG,EAAaH,MAAQ,GAVD,4CAAJ,qDAadqB,EAAS,SAACe,GACZJ,EAAKhC,MAAQoC,EAAMJ,KAAO,EAC1BC,EAAQjC,MAAQoC,EAAMlB,KACtBgB,KAGEG,EAAe,WACjB,OAAOlC,EAAaH,MAAMsC,KAAI,SAACC,GAAD,MAAW,CACrCC,QAASD,EAAKC,QACdC,UAAWF,EAAKE,eAKlB1B,GADQ,iBACD,yDAAI,6GACP2B,EAAU,CACZC,MAAON,KAFE,SAKM,eAAgBK,GALtB,UAKPE,EALO,OAMM,UAAfA,EAAKC,OANI,iDAQbC,OAAOC,KAAP,UAAe,OAAf,YAAyBH,EAAKI,MAC9B7C,EAAaH,MAAQ,GATR,2CAAJ,sDAYPgB,EAAkB,yDAAI,2GAClB0B,EAAU,CACZC,MAAON,IACPQ,OAAQ,GAHY,SAKlB,eAAaH,GALK,OAMxBR,IANwB,2CAAJ,qDAaxB,OAJA,gBAAU,WACNA,OAGG,CACHjC,eACAE,eACAI,UACAI,WACAQ,eACAE,SACAN,WACAC,sBACAF,OAAQ,WACJoB,Q,qBCxKhB,MAAMe,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d229845.9bd8d722.js","sourcesContent":["<template>\n    <p-data-table\n        :value=\"completeList\"\n        v-model:selection=\"selectedList\"\n        selection\n        dataKey=\"cycleId\"\n        class=\"p-datatable-sm\"\n        showGridlines\n        responsiveLayout=\"scroll\"\n        :loading=\"loading\"\n        :scrollable=\"true\"\n        scrollHeight=\"calc(100vh - 130px)\"\n    >\n        <template #header>\n            <div class=\"table-header\" style=\"display: flex;\">\n                <p-checkbox\n                    v-model=\"uploaded\"\n                    :binary=\"true\"\n                    class=\"p-mr-2 p-mb-2\"\n                    style=\"margin-top: 5px;\"\n                />\n                <label class=\"p-mr-4\" style=\"margin-top: 8px;\">Uploaded</label>\n\n                <p-button\n                    label=\"Filter\"\n                    class=\"p-mr-2 p-button-sm\"\n                    @click=\"filter\"\n                />\n                <p-button\n                    label=\"Download\"\n                    class=\"p-mr-2 p-button-sm p-button-warning\"\n                    @click=\"download\"\n                />\n                <p-button\n                    label=\"Mark As Upload\"\n                    class=\"p-mr-2 p-button-sm p-button-success\"\n                    @click=\"markAsUploadHandler\"\n                />\n            </div>\n        </template>\n\n        <p-column\n            selectionMode=\"multiple\"\n            headerStyle=\"width: 3em\"\n            style=\"width: 3rem; max-width: 3rem;\"\n        />\n        <p-column field=\"patientName\" header=\"Patient name\" />\n        <p-column\n            field=\"cycleNo\"\n            header=\"Cycle Number\"\n            style=\"max-width: 10rem\"\n        />\n        <p-column field=\"cycleId\" header=\"Cycle id\" style=\"max-width: 7rem\" />\n        <p-column\n            field=\"cycleName\"\n            header=\"Cycle Type\"\n            style=\"max-width: 8rem\"\n        />\n        <p-column\n            field=\"cycleNoType\"\n            header=\"Cycle no type\"\n            style=\"max-width: 8rem\"\n        />\n        <p-column field=\"ohip\" header=\"Funded\" style=\"max-width: 7rem\">\n            <template #body=\"{ data }\">\n                {{ data.ohip == 1 ? \"Yes\" : \"No\" }}\n            </template>\n        </p-column>\n        <p-column\n            field=\"cycleDate\"\n            header=\"Cycle Date\"\n            style=\"max-width: 120px\"\n        >\n            <template #body=\"{ data }\">\n                {{ data.cycleDate.split(\" \")[0] }}\n            </template>\n        </p-column>\n        <p-column></p-column>\n\n        <template #footer>\n            <p-paginator\n                :rows=\"10\"\n                :totalRecords=\"totalRecords\"\n                :rowsPerPageOptions=\"[10, 20, 30]\"\n                @page=\"onPage($event)\"\n            />\n        </template>\n    </p-data-table>\n</template>\n\n<script>\nimport { ORIGIN } from \"@/config\";\nimport {\n    getBornCompleteList,\n    getBornCSV,\n    getBronCsvMulti,\n    markAsUpload\n} from \"@/service/art-cycle\";\nimport { ref, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n    setup() {\n        const completeList = ref([]);\n        const selectedList = ref([]);\n        const loading = ref(false);\n        const totalRecords = ref(0);\n        const uploaded = ref(false);\n        const page = ref(1);\n        const perPage = ref(10);\n\n        const getCompleteList = async () => {\n            loading.value = true;\n            const { data, total } = await getBornCompleteList(\n                page.value,\n                perPage.value,\n                uploaded.value ? 1 : 0\n            );\n            completeList.value = data;\n            totalRecords.value = total;\n            loading.value = false;\n            selectedList.value = [];\n        };\n\n        const onPage = (event) => {\n            page.value = event.page + 1;\n            perPage.value = event.rows;\n            getCompleteList();\n        };\n\n        const cyclePayload = () => {\n            return selectedList.value.map((item) => ({\n                cycleId: item.cycleId,\n                patientId: item.patientId\n            }));\n        };\n\n        const store = useStore();\n        const download = async () => {\n            const payload = {\n                cycle: cyclePayload()\n            };\n\n            const resp = await getBronCsvMulti(payload);\n            if (resp.status == \"failed\") return;\n\n            window.open(`${ORIGIN}/${resp.csv}`);\n            selectedList.value = [];\n        };\n\n        const markAsUploadHandler = async () => {\n            const payload = {\n                cycle: cyclePayload(),\n                status: 1\n            };\n            await markAsUpload(payload);\n            getCompleteList();\n        };\n\n        onMounted(() => {\n            getCompleteList();\n        });\n\n        return {\n            completeList,\n            selectedList,\n            loading,\n            uploaded,\n            totalRecords,\n            onPage,\n            download,\n            markAsUploadHandler,\n            filter: () => {\n                getCompleteList();\n            }\n        };\n    }\n};\n</script>\n","import { render } from \"./born-complete-list.vue?vue&type=template&id=451a4670\"\nimport script from \"./born-complete-list.vue?vue&type=script&lang=js\"\nexport * from \"./born-complete-list.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/saif/Projects/vue-cycle-ui/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}