{"version":3,"sources":["webpack:///./src/views/maintanance/media-inventory.vue?0e03","webpack:///./src/views/maintanance/media-inventory.vue","webpack:///./src/views/maintanance/media-inventory.vue?4971","webpack:///./node_modules/core-js/modules/es.array.join.js"],"names":["class","style","for","content","value","mediaInventoryList","responsiveLayout","showGridlines","header","field","body","data","icon","showEditMediaInventoryDialog","label","autofocus","showAddMediaInventoryDialog","visible","addMediaInventoryDialog","modal","formIsEdit","form","type","id","save","confirmDelete","deleteMediaInventoryDialog","deleteMedia","cancelDeleteMediaInventory","setup","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","lotNumber","startDate","endDate","fetchMediaInventoryList","get","response","console","log","error","edit","create","post","push","index","findIndex","item","resetForm","Object","assign","filter","__exports__","render","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","target","proto","forced","separator","call","this","undefined"],"mappings":"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","file":"js/chunk-bc3b7c0e.3d31dde9.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./media-inventory.vue?vue&type=style&index=0&id=3dcf7c43&scoped=true&lang=css\"","<template>\r\n    <p-card style=\"width: 800px; margin: auto\">\r\n        <template #content>\r\n            <div class=\"p-d-flex p-jc-between p-mb-3\">\r\n                <strong style=\"font-size: 1.5rem\">Media Inventory</strong>\r\n            </div>\r\n\r\n            <p-data-table\r\n                :value=\"mediaInventoryList\"\r\n                responsiveLayout=\"scroll\"\r\n                showGridlines\r\n                class=\"p-datatable-sm p-mb-1\"\r\n            >\r\n                <p-column header=\"Media Name\" field=\"type\" />\r\n                <!-- <p-column header=\"Lot Number\" field=\"lotNumber\" />\r\n                <p-column header=\"Start Date\" field=\"startDate\"/>\r\n                <p-column header=\"End Date\" field=\"endDate\"/> -->\r\n                <p-column style=\"width: 50px\">\r\n                    <template #body=\"{data}\">\r\n                        <p-button\r\n                            icon=\"pi pi-pencil\"\r\n                            @click=\"showEditMediaInventoryDialog(data)\"\r\n                        />\r\n                    </template>\r\n                </p-column>\r\n            </p-data-table>\r\n\r\n            <div class=\"p-d-flex p-jc-between p-mt-2\">\r\n                <p-button\r\n                    label=\"Add\"\r\n                    autofocus\r\n                    @click=\"showAddMediaInventoryDialog\"\r\n                />\r\n            </div>\r\n        </template>\r\n    </p-card>\r\n\r\n    <p-dialog\r\n        v-model:visible=\"addMediaInventoryDialog\"\r\n        :modal=\"true\"\r\n        style=\"width: 600px\"\r\n    >\r\n        <template #header>\r\n            <div class=\"table-header\">\r\n                <strong>{{ formIsEdit ? 'Edit Media' : 'Add Media' }}</strong>\r\n            </div>\r\n        </template>\r\n\r\n        <div class=\"p-fluid\">\r\n            <div class=\"p-field\">\r\n                <label for=\"type\">Media Name</label>\r\n                <p-input-text v-model=\"form.type\" id=\"type\" />\r\n            </div>\r\n            <!-- <div class=\"p-field\">\r\n                <label for=\"lotNumber\">Lot Number</label>\r\n                <p-input-text v-model=\"form.lotNumber\" id=\"lotNumber\" />\r\n            </div>\r\n            <div class=\"p-field\">\r\n                <label for=\"startDate\">Start Date</label>\r\n                <p-calendar dateFormat=\"mm/dd/y\" v-model=\"form.startDate\" id=\"startDate\" :showIcon=\"true\" />\r\n            </div>\r\n            <div class=\"p-field\">\r\n                <label for=\"endDate\">End Date</label>\r\n                <p-calendar dateFormat=\"mm/dd/y\" v-model=\"form.endDate\" id=\"endDate\" :showIcon=\"true\" />\r\n            </div> -->\r\n        </div>\r\n\r\n        <div class=\"p-d-flex p-mt-6\">\r\n            <p-button\r\n                label=\"Update\"\r\n                class=\"p-mr-3\"\r\n                autofocus\r\n                @click=\"save\"\r\n                v-if=\"formIsEdit\"\r\n            />\r\n            <p-button label=\"Save\" autofocus @click=\"save\" v-else />\r\n            <p-button\r\n                label=\"Delete\"\r\n                class=\"p-button-danger\"\r\n                @click=\"confirmDelete\"\r\n                v-if=\"formIsEdit\"\r\n            />\r\n        </div>\r\n    </p-dialog>\r\n    \r\n    <!-- Delete Confirmation Dialog -->\r\n    <p-dialog\r\n        v-model:visible=\"deleteMediaInventoryDialog\"\r\n        modal\r\n        header=\"Delete Media Inventory!!\"\r\n        :style=\"{ width: '30rem' }\"\r\n    >\r\n        <p>\r\n            Are you sure you want to delete?\r\n        </p>\r\n        <p-button\r\n            label=\"Yes\"\r\n            class=\"p-button-danger p-mr-2\"\r\n            @click=\"deleteMedia\"\r\n        />\r\n        <p-button label=\"No\" class=\"p-mr-2\" @click=\"cancelDeleteMediaInventory\" />\r\n    </p-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport { $axios } from \"@/service/app-http\";\r\n\r\nexport default {\r\n    setup() {\r\n        const addMediaInventoryDialog = ref(false);\r\n        const deleteMediaInventoryDialog = ref(false);\r\n        const formIsEdit = ref(false);\r\n\r\n        const formatDate = (date) => {\r\n            const d = new Date(date);\r\n            let month = \"\" + (d.getMonth() + 1);\r\n            let day = \"\" + d.getDate();\r\n            const year = d.getFullYear();\r\n\r\n            if (month.length < 2) month = \"0\" + month;\r\n            if (day.length < 2) day = \"0\" + day;\r\n\r\n            return [year, month, day].join(\"-\");\r\n        };\r\n\r\n        const form = reactive({\r\n            id: null,\r\n            type: null,\r\n            lotNumber: null,\r\n            startDate: null,\r\n            endDate: null,\r\n        });\r\n\r\n        const mediaInventoryList = ref([]);\r\n\r\n        const fetchMediaInventoryList = async () => {\r\n            try {\r\n                const response = await $axios.get(\"media_inventory/list\");\r\n                console.log(response.data);\r\n                mediaInventoryList.value = response.data.mediaInventoryList;\r\n            } catch (error) {\r\n                console.error('Error fetching media inventory list:', error);\r\n            }\r\n        };\r\n\r\n        const save = async () => {\r\n            try {\r\n                form.startDate = formatDate(form.startDate);\r\n                form.endDate = formatDate(form.endDate);\r\n\r\n                if (formIsEdit.value) {\r\n                    await edit();\r\n                } else {\r\n                    await create();\r\n                }\r\n                addMediaInventoryDialog.value = false;\r\n                fetchMediaInventoryList();\r\n            } catch (error) {\r\n                console.error('Error saving media inventory:', error);\r\n            }\r\n        };\r\n\r\n        const create = async () => {\r\n            const response = await $axios.post(\"media_inventory/create\", form);\r\n            mediaInventoryList.value.push({\r\n                ...response.data,\r\n                startDate: formatDate(response.data.startDate),\r\n                endDate: formatDate(response.data.endDate),\r\n            });\r\n        };\r\n\r\n        const edit = async () => {\r\n            try {\r\n                const response = await $axios.post(`media_inventory/update/${form.id}`, form);\r\n                const index = mediaInventoryList.value.findIndex(item => item.id === form.id);\r\n                if (index !== -1) {\r\n                    mediaInventoryList.value[index] = {\r\n                        ...response.data,\r\n                        startDate: formatDate(response.data.startDate),\r\n                        endDate: formatDate(response.data.endDate),\r\n                    };\r\n                }\r\n            } catch (error) {\r\n                console.error('Error updating media inventory:', error);\r\n            }\r\n        };\r\n\r\n        const showAddMediaInventoryDialog = () => {\r\n            formIsEdit.value = false;\r\n            resetForm();\r\n            addMediaInventoryDialog.value = true;\r\n        };\r\n\r\n        const showEditMediaInventoryDialog = (data) => {\r\n            formIsEdit.value = true;\r\n            Object.assign(form, {\r\n                ...data,\r\n                startDate: formatDate(data.startDate),\r\n                endDate: formatDate(data.endDate),\r\n            });\r\n            addMediaInventoryDialog.value = true;\r\n        };\r\n\r\n        const resetForm = () => {\r\n            form.id = null;\r\n            form.type = null;\r\n            form.lotNumber = null;\r\n            form.startDate = null;\r\n            form.endDate = null;\r\n        };\r\n\r\n        const confirmDelete = () => {\r\n            deleteMediaInventoryDialog.value = true;\r\n        };\r\n\r\n        const deleteMedia = async () => {\r\n            try {\r\n                if (formIsEdit.value && form.id) {\r\n                    await $axios.post(`media_inventory/delete/${form.id}`);\r\n                    mediaInventoryList.value = mediaInventoryList.value.filter(\r\n                        item => item.id !== form.id\r\n                    );\r\n                    addMediaInventoryDialog.value = false;\r\n                    deleteMediaInventoryDialog.value = false;\r\n                }\r\n            } catch (error) {\r\n                console.error('Error deleting media inventory:', error);\r\n            }\r\n        };\r\n\r\n        const cancelDeleteMediaInventory = () => {\r\n            deleteMediaInventoryDialog.value = false;\r\n        };\r\n\r\n        onMounted(() => {\r\n            fetchMediaInventoryList();\r\n        });\r\n\r\n        return {\r\n            form,\r\n            formIsEdit,\r\n            addMediaInventoryDialog,\r\n            deleteMediaInventoryDialog,\r\n            mediaInventoryList,\r\n            showAddMediaInventoryDialog,\r\n            showEditMediaInventoryDialog,\r\n            save,\r\n            confirmDelete,\r\n            deleteMedia,\r\n            cancelDeleteMediaInventory\r\n        };\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.table-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n</style>\r\n","import { render } from \"./media-inventory.vue?vue&type=template&id=3dcf7c43&scoped=true\"\nimport script from \"./media-inventory.vue?vue&type=script&lang=js\"\nexport * from \"./media-inventory.vue?vue&type=script&lang=js\"\n\nimport \"./media-inventory.vue?vue&type=style&index=0&id=3dcf7c43&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\newlife\\\\vue-cycle-ui\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3dcf7c43\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n"],"sourceRoot":""}